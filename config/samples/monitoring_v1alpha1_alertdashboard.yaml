apiVersion: monitoring.krutsko.com/v1alpha1
kind: AlertDashboard
metadata:
  name: backend-services
  namespace: monitoring
  labels:
    grafana_dashboard: "1"
spec:
  ruleSelector:
    matchLabels:
      tier: backend
    matchExpressions:
      - key: team
        operator: Exists
  dashboardConfig:
    title: "Backend Services Alerts Overview"
    folder: "Teams"
    configMapNamePrefix: "grafana-dashboard"
    panels:
      alertsOverview: true
      timeSeriesGraphs: true
      alertHistory: true
    variables:
      - name: team
        type: query
        query: "label_values(team)"
      - name: service
        type: query
        query: "label_values(app)"